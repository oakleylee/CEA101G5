--清除表格
--檢舉
DROP TABLE STORE_CMT_REPORT;
DROP TABLE MENU_REPORT;

--商城
DROP TABLE PRODUCT_PHOTO;
DROP TABLE PRODUCT_QA;
DROP TABLE PROMOTION_DETAIL;
DROP TABLE PROMOTION;
DROP TABLE ADVERTISEMENT;
DROP TABLE LATEST_NEWS;
DROP TABLE ORDER_DETAIL;
DROP TABLE ORDER_MASTER;
DROP TABLE PRODUCT;
DROP TABLE PRODUCT_CATEGORY;

--管理員
DROP TABLE EMP_AUTH;
DROP TABLE EMP_AUTH_CATEGORY ;
DROP TABLE EMP_DATA;

--取號
DROP TABLE QUEUE_NO;
DROP TABLE QUEUE_PERIOD;
DROP TABLE QUEUE_LINE;
DROP TABLE QUEUE_TABLE;


--外帶
DROP TABLE SUPCHAR_MENU_DETAIL;
DROP TABLE FOODORDER_DETAIL;
DROP TABLE FOODORDER;

--訂位
DROP TABLE RESERVE_SITUATION;
DROP TABLE RESERVE_ORDER;
DROP TABLE ACCEPT_RESERVE;


--餐廳
DROP TABLE MENU_SUPCHAR_DETAIL;
DROP TABLE MENU_SUPPLIES;
DROP TABLE MENU_SUPCHAR;
DROP TABLE MENU;
DROP TABLE RESTAURANT_CMT;
DROP TABLE RESTAURANT_PICTURE;
DROP TABLE RESTAURANT;
DROP TABLE STORE_CHAR_DETAIL;

--會員
DROP TABLE MEMBER_RECHARGE;
DROP TABLE MEMBER;



--清除SEQ
--會員
DROP SEQUENCE SEQ_RECHARGE_ID;

--餐廳
DROP SEQUENCE SEQ_STORE_ID;
DROP SEQUENCE SEQ_STORE_CHAR;
DROP SEQUENCE SEQ_STORE_CMT_ID;
DROP SEQUENCE SEQ_MENU_ID;
DROP SEQUENCE SEQ_MENU_SUPCHAR_ID;
DROP SEQUENCE SEQ_MENU_SUPCHAR_DETAIL_ID;
DROP SEQUENCE SEQ_STORE_PICTURE_ID;
DROP SEQUENCE SEQ_PK_MENU_SUPPLIES;

--管理員
DROP SEQUENCE SEQ_EMP_ID;
DROP SEQUENCE SEQ_STORE_CMT_REPORT_ID;
DROP SEQUENCE SEQ_MENU_REPORT_ID;

--外帶
DROP SEQUENCE SEQ_FOODORDER_ID;

--取號
--DROP SEQUENCE SEQ_QUEUE_NO;

--訂位
DROP SEQUENCE SEQ_RESERVE_ORDER_ID;

--商城
DROP SEQUENCE SEQ_PRODUCT_CATEGORY_ID;
DROP SEQUENCE SEQ_PRODUCT_PHOTO_ID;
DROP SEQUENCE SEQ_PQA_ID;
DROP SEQUENCE SEQ_ORDER_ID;
DROP SEQUENCE SEQ_NEWS_ID;
DROP SEQUENCE SEQ_AD_ID;
DROP SEQUENCE SEQ_PROMO_ID;


-- 時間格式設定--
ALTER SESSION SET NLS_DATE_FORMAT = 'yyyy-mm-dd';
ALTER SESSION SET NLS_TIMESTAMP_FORMAT = 'yyyy-mm-dd hh24:mi:ss';

----會員
--顧客會員資料表
CREATE TABLE MEMBER(
MEM_PHONE VARCHAR2(10) PRIMARY KEY NOT NULL,
MEM_PWD VARCHAR2(60) NOT NULL,
MEM_NAME VARCHAR2(20) NOT NULL,
MEM_ADDRESS VARCHAR2(300),
MEM_SEX NUMBER,
MEM_EMAIL VARCHAR2(100),
MEM_IDENTITY VARCHAR2(10),
MEM_BIRTHDAY DATE,
MEM_NICKNAME VARCHAR2(30),
MEM_PHOTO	BLOB,
MEM_LICENSE	NUMBER,
MEM_CONDITION	NUMBER DEFAULT 0,	
MEM_AUTHORITY	VARCHAR2(10) DEFAULT 111,
RECHARGE_TOTAL	NUMBER DEFAULT 0 NOT NULL,
MEM_CARDNUMBER VARCHAR2(20),
MEM_CARDHOLDER VARCHAR2(60),
MEM_CARDEXPIRATIONDATE VARCHAR2(60),
MEM_CARDEXPIRATIONDATE VARCHAR2(60),
MEM_CARDCCV VARCHAR2(10)
);


--顧客儲值紀錄表
CREATE SEQUENCE SEQ_RECHARGE_ID
INCREMENT BY 1
START WITH 1
NOMAXVALUE
NOCYCLE
NOCACHE;

CREATE TABLE MEMBER_RECHARGE(
RECHARGE_ID VARCHAR2(60) PRIMARY KEY NOT NULL,
MEM_PHONE VARCHAR2(10) NOT NULL REFERENCES MEMBER (MEM_PHONE),
RECHARGE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
RECHARGE_CHANGE NUMBER NOT NULL
);


----餐廳
--餐廳分類明細
CREATE SEQUENCE SEQ_STORE_CHAR
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE STORE_CHAR_DETAIL(
STORE_CHAR VARCHAR2(60) PRIMARY KEY NOT NULL,
STORE_CHAR_NAME VARCHAR2(60)
);


--餐廳資訊表
CREATE SEQUENCE SEQ_STORE_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE RESTAURANT(
STORE_ID VARCHAR2(60) PRIMARY KEY NOT NULL,
MEM_PHONE VARCHAR2(10) NOT NULL REFERENCES MEMBER(MEM_PHONE),
STORE_CHAR VARCHAR2(60) NOT NULL REFERENCES STORE_CHAR_DETAIL(STORE_CHAR),
STORE_INFO VARCHAR2(300),
STORE_NAME VARCHAR2(60),
STORE_PHONE VARCHAR2(15),
STORE_ADDRESS VARCHAR2(300),
STORE_STATUS NUMBER,
STORE_FINAL_RESERVDATE NUMBER DEFAULT(30),
STORE_ORDER_CONDITION NUMBER,
STORE_RESERV_CONDITION NUMBER,
STORE_QUEUE_CONDITION NUMBER,
STORE_ORDER_WAITTIME NUMBER,
STORE_OPENTIME TIMESTAMP,
STORE_CLOSETIME TIMESTAMP,
STORE_START_ORDERDATE TIMESTAMP,
STORE_END_ORDERDATE TIMESTAMP,
ACCEPT_GROUPS NUMBER DEFAULT(0),
NUM_OF_GROUPS NUMBER DEFAULT(2),
STORE_PEOPLE_TOTAL NUMBER,
STORE_RATING_TOTAL NUMBER
);

--餐廳照片
CREATE SEQUENCE SEQ_STORE_PICTURE_ID 
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE RESTAURANT_PICTURE(
STORE_PICTURE_ID VARCHAR2(60) PRIMARY KEY NOT NULL,
STORE_ID VARCHAR2(60) NOT NULL REFERENCES RESTAURANT(STORE_ID),
STORE_PICTURE BLOB
);

--餐廳評論紀錄表
CREATE SEQUENCE SEQ_STORE_CMT_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE RESTAURANT_CMT(
STORE_CMT_ID VARCHAR2(60) PRIMARY KEY NOT NULL,
STORE_ID VARCHAR2(60) NOT NULL REFERENCES RESTAURANT(STORE_ID),
MEM_PHONE VARCHAR2(10) NOT NULL REFERENCES MEMBER(MEM_PHONE),
STORE_CMT_CONTENT VARCHAR2(600) NOT NULL,
STORE_RATING NUMBER(10) NOT NULL,
STORE_CMT_STATUS NUMBER
);


--餐點表
CREATE SEQUENCE SEQ_MENU_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE MENU(
MENU_ID VARCHAR2(60) PRIMARY KEY NOT NULL,
STORE_ID VARCHAR2(60) NOT NULL REFERENCES RESTAURANT(STORE_ID),
MENU_NAME VARCHAR2(60) NOT NULL,
MENU_DETAIL VARCHAR2(900),
MENU_PIC BLOB,
MENU_CHAR VARCHAR2(300),
MENU_STATUS NUMBER,
MENU_PRICE NUMBER NOT NULL,
MENU_SELL_STATUS NUMBER
);


--餐點客製化選項表
CREATE SEQUENCE SEQ_MENU_SUPCHAR_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE MENU_SUPCHAR(
MENU_SUPCHAR_ID VARCHAR2(60) PRIMARY KEY NOT NULL,
MENU_SUPCHAR_NAME VARCHAR2(60) NOT NULL
);

--餐點客製化表
CREATE SEQUENCE SEQ_PK_MENU_SUPPLIES
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE MENU_SUPPLIES(
MENU_SUPCHAR_ID VARCHAR2(60) NOT NULL REFERENCES MENU_SUPCHAR(MENU_SUPCHAR_ID),
MENU_ID VARCHAR2(60) NOT NULL REFERENCES MENU(MENU_ID),
CONSTRAINT PK_MENU_SUPPLIES PRIMARY KEY (MENU_SUPCHAR_ID,MENU_ID)
);

--餐點客製化選項明細表
CREATE SEQUENCE SEQ_MENU_SUPCHAR_DETAIL_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE MENU_SUPCHAR_DETAIL(
MENU_SUPCHAR_DETAIL_ID VARCHAR2(60) PRIMARY KEY NOT NULL,
MENU_SUPCHAR_ID VARCHAR2(60) REFERENCES MENU_SUPCHAR(MENU_SUPCHAR_ID),
MENU_SUPCHAR_DETAIL_NAME VARCHAR2(60),
MENU_SUPCHAR_PRICE VARCHAR2(60) NOT NULL
);

----管理員
--員工資料
CREATE SEQUENCE SEQ_EMP_ID
  START WITH 1
  INCREMENT BY 1
  NOMAXVALUE;

CREATE TABLE EMP_DATA(
EMP_ID VARCHAR2(60) NOT NULL PRIMARY KEY,
EMP_ACCOUNT VARCHAR2(60) NOT NULL,
EMP_PWD VARCHAR2(60) NOT NULL,
EMP_NAME VARCHAR2(60) NOT NULL,
EMP_IMAGE BLOB ,
EMP_STATUS NUMBER,
EMP_DATE DATE
);

--平台員工權限細項
CREATE TABLE EMP_AUTH_CATEGORY(
AUTH_NO VARCHAR2(60) NOT NULL PRIMARY KEY,
AUTH_NAME VARCHAR2(300) NOT NULL
);

--平台員工權限
CREATE TABLE EMP_AUTH(
EMP_ID VARCHAR2(60) NOT NULL REFERENCES EMP_DATA (EMP_ID),
AUTH_NO VARCHAR2(60) NOT NULL REFERENCES EMP_AUTH_CATEGORY (AUTH_NO),
CONSTRAINT PK_EMP_AUTH PRIMARY KEY (EMP_ID,AUTH_NO)
);

--餐點檢舉記錄表
CREATE SEQUENCE SEQ_MENU_REPORT_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE MENU_REPORT(
MENU_REPORT_ID VARCHAR2(60) NOT NULL PRIMARY KEY,
MEM_PHONE VARCHAR2(10) NOT NULL REFERENCES MEMBER (MEM_PHONE),
STORE_ID VARCHAR2(60) NOT NULL REFERENCES RESTAURANT (STORE_ID),
MENU_ID VARCHAR2(60)NOT NULL REFERENCES MENU (MENU_ID),
MENU_REPORT_CONTENT VARCHAR2(1500) ,
MENU_REPORT_STATUS NUMBER
);

--餐廳評論檢舉表
CREATE SEQUENCE SEQ_STORE_CMT_REPORT_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE STORE_CMT_REPORT(
STORE_CMT_REPORT_ID VARCHAR2(60) NOT NULL PRIMARY KEY,
MEM_PHONE VARCHAR2(10) NOT NULL REFERENCES MEMBER (MEM_PHONE),
STORE_ID VARCHAR2(60) NOT NULL REFERENCES RESTAURANT (STORE_ID),
STORE_REPORT_CONTENT VARCHAR2(1500) ,
STORE_CMT_REPORT_STATUS NUMBER
);

----外帶
--外帶訂單表
CREATE SEQUENCE SEQ_FOODORDER_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

--外帶訂單表
CREATE TABLE FOODORDER(
FOODORDER_ID VARCHAR2(60) PRIMARY KEY NOT NULL,
MEM_PHONE VARCHAR2(10) NOT NULL REFERENCES MEMBER (MEM_PHONE),
STORE_ID VARCHAR2(60) NOT NULL REFERENCES RESTAURANT (STORE_ID),
FOODORDER_TIME TIMESTAMP,
FOODORDER_COMPLETE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
FOODORDER_TOTALPRICE NUMBER,
FOODORDER_NOTE VARCHAR2(300),
FOODORDER_STATUS NUMBER DEFAULT 0
);

--外帶訂單明細表
CREATE TABLE FOODORDER_DETAIL(
MENU_ID VARCHAR2(60) NOT NULL REFERENCES MENU (MENU_ID),
FOODORDER_ID VARCHAR2(60) NOT NULL REFERENCES FOODORDER(FOODORDER_ID),
MENU_NUM NUMBER NOT NULL,
MENU_PRICE NUMBER NOT NULL,
CONSTRAINT PK_FOODORDER_DETAIL PRIMARY KEY (MENU_ID,FOODORDER_ID)
);

--客製化餐點明細
CREATE TABLE SUPCHAR_MENU_DETAIL(
FOODORDER_ID VARCHAR2(60) NOT NULL REFERENCES FOODORDER(FOODORDER_ID),
MENU_ID VARCHAR2(60) NOT NULL REFERENCES MENU (MENU_ID),
MENU_SUPCHAR_DETAIL_ID VARCHAR2(60) NOT NULL REFERENCES MENU_SUPCHAR_DETAIL (MENU_SUPCHAR_DETAIL_ID),
MENU_SUPCHAR_ID  VARCHAR2(60) NOT NULL REFERENCES MENU_SUPCHAR (MENU_SUPCHAR_ID),
CONSTRAINT PK_SUPCHAR_MENU_DETAIL PRIMARY KEY (FOODORDER_ID,MENU_ID)
);


----訂位
--可訂位時段
CREATE TABLE ACCEPT_RESERVE (
	PERIOD_ID NUMBER,
    	STORE_ID VARCHAR2(60) NOT NULL REFERENCES RESTAURANT (STORE_ID),
	START_TIME TIMESTAMP NOT NULL,
	END_TIME TIMESTAMP NOT NULL,
	PERIOD_STATUS NUMBER DEFAULT 0 NOT NULL,
    CONSTRAINT PK_ACCEPT_RESERVE PRIMARY KEY (PERIOD_ID,STORE_ID)
);

--訂位訂單
CREATE SEQUENCE SEQ_RESERVE_ORDER_ID
INCREMENT BY 1
START WITH 1
MINVALUE 0
NOMAXVALUE
NOCYCLE
NOCACHE;

CREATE TABLE RESERVE_ORDER (
	RESERV_ID VARCHAR2(60) PRIMARY KEY NOT NULL,
    STORE_ID VARCHAR2(60) NOT NULL,
    PERIOD_ID NUMBER NOT NULL,
	MEM_PHONE VARCHAR2(10) NOT NULL REFERENCES MEMBER(MEM_PHONE),
	RESERV_TIME DATE NOT NULL,
	RESERV_ADULT NUMBER NOT NULL,
	RESERV_CHILD NUMBER DEFAULT 0,
	RESERV_STATUS NUMBER DEFAULT 0,
	RESERV_NOTE VARCHAR2(50),
	RESERV_CREATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT FK_RESERVE_ORDER
    FOREIGN KEY (STORE_ID,PERIOD_ID) REFERENCES ACCEPT_RESERVE (STORE_ID,PERIOD_ID)
);


--訂位狀況
CREATE TABLE RESERVE_SITUATION (
	RESERV_SITUATION_DATE DATE NOT NULL,
	STORE_ID VARCHAR2(60) NOT NULL,
	PERIOD_ID NUMBER NOT NULL,
	FOREIGN KEY (STORE_ID,PERIOD_ID) REFERENCES ACCEPT_RESERVE (STORE_ID,PERIOD_ID),
	ACCEPT_GROUPS NUMBER NOT NULL,
	RESERVED_GROUPS NUMBER DEFAULT 0 NOT NULL,
	CONSTRAINT PK_RESERVE_SITUATION PRIMARY KEY (RESERV_SITUATION_DATE,STORE_ID,PERIOD_ID) );

----取號
--桌位
CREATE TABLE QUEUE_TABLE(
    QUEUE_TABLE_ID NUMBER NOT NULL,
    QUEUE_TABLE_TYPE VARCHAR2(3) NOT NULL,
    STORE_ID VARCHAR2(60)NOT NULL,
    QUEUE_TABLE_TTL NUMBER NOT NULL,
    QUEUE_TABLE_USABLE NUMBER,
    QUEUE_TABLE_OCC NUMBER,
    CONSTRAINT FK_QUEUE_TABLE_RESTAURANT
    FOREIGN KEY (STORE_ID) REFERENCES RESTAURANT(STORE_ID),
    CONSTRAINT PK_QUEUE_TABLE PRIMARY KEY(QUEUE_TABLE_ID,STORE_ID)
);

--叫號佇列
CREATE TABLE QUEUE_LINE(
QUEUE_LINE_NO NUMBER NOT NULL,
QUEUE_NO_CALL NUMBER,
STORE_ID VARCHAR2(60) NOT NULL,
QUEUE_TABLE_ID NUMBER NOT NULL,
CONSTRAINT PK_QUEUE_LINE PRIMARY KEY (QUEUE_LINE_NO,STORE_ID,QUEUE_TABLE_ID),
CONSTRAINT FK_QUEUE_LINE_QUEUE_TABLE
FOREIGN KEY (QUEUE_TABLE_ID,STORE_ID) REFERENCES QUEUE_TABLE(QUEUE_TABLE_ID,STORE_ID)
);

--取號時段
CREATE TABLE QUEUE_PERIOD(
    QUEUE_PERIOD_ID NUMBER NOT NULL,
    STORE_ID VARCHAR2(60) NOT NULL REFERENCES RESTAURANT(STORE_ID),
    QUEUE_ST NUMBER NOT NULL,
    QUEUE_START_TIME TIMESTAMP NOT NULL,
    QUEUE_END_TIME TIMESTAMP NOT NULL,
    QUEUE_NO_CURRENT NUMBER,
    CONSTRAINT PK_QUEUE_PERIOD PRIMARY KEY(QUEUE_PERIOD_ID,STORE_ID)
);
--取號
CREATE TABLE QUEUE_NO(
    QUEUE_NUM NUMBER NOT NULL,
    MEM_PHONE VARCHAR2(10) NOT NULL REFERENCES MEMBER(MEM_PHONE),
    PARTY NUMBER,
    QUEUE_NO_TIME TIMESTAMP,
    STORE_ID VARCHAR2(60) NOT NULL,
    QUEUE_PERIOD_ID NUMBER NOT NULL,
    QUEUE_LINE_NO NUMBER NOT NULL,
    QUEUE_TABLE_ID NUMBER,
    CONSTRAINT FK_QUEUE_NO FOREIGN KEY (QUEUE_LINE_NO,STORE_ID,QUEUE_TABLE_ID) REFERENCES QUEUE_LINE(QUEUE_LINE_NO,STORE_ID,QUEUE_TABLE_ID),
    CONSTRAINT PK_QUEUE_NO PRIMARY KEY (QUEUE_NUM,MEM_PHONE)
);

----商城
--商城商品類別表
CREATE SEQUENCE SEQ_PRODUCT_CATEGORY_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;
  
CREATE TABLE PRODUCT_CATEGORY (
  CATEGORY_ID NUMBER PRIMARY KEY NOT NULL,
  CATEGORY_NAME VARCHAR2(90) NOT NULL,
  CATEGORY_STATUS NUMBER NOT NULL
);

-- 商城商品表
CREATE TABLE PRODUCT (
  PRODUCT_ID VARCHAR2(30) PRIMARY KEY NOT NULL,
  PRODUCT_NAME VARCHAR2(90) NOT NULL,
  PRODUCT_DESCRIPTION VARCHAR2(1000),
  PRODUCT_MSRP NUMBER NOT NULL,
  PRODUCT_PRICE NUMBER NOT NULL,
  PRODUCT_QTY_SOLD NUMBER,
  CATEGORY_ID NUMBER NOT NULL,
  PRODUCT_STATUS NUMBER NOT NULL,
  CONSTRAINT FK_CATEGORY_ID_IN_PRODUCT FOREIGN KEY(CATEGORY_ID) REFERENCES PRODUCT_CATEGORY(CATEGORY_ID)
);


--商城商品照片
CREATE SEQUENCE SEQ_PRODUCT_PHOTO_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE PRODUCT_PHOTO (
  PRODUCT_PHOTO_ID NUMBER PRIMARY KEY NOT NULL,
  PRODUCT_ID VARCHAR2(30) NOT NULL,
  PRODUCT_PHOTO BLOB,
  CONSTRAINT FK_PRODUCT_ID_IN_PHOTO FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID)
);

--商城商品問與答
CREATE SEQUENCE SEQ_PQA_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE PRODUCT_QA (
  PQA_ID NUMBER PRIMARY KEY NOT NULL,
  PRODUCT_ID VARCHAR2(30) NOT NULL,
  MEM_PHONE VARCHAR2(10) NOT NULL,
  PRODUCT_QUES VARCHAR2(1000),
  PRODUCT_QUES_TSTAMP TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  PRODUCT_REPLY VARCHAR2(1000),
  PRODUCT_REPLY_TSTAMP TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  CONSTRAINT FK_PRODUCT_ID_IN_QA FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID),
  CONSTRAINT FK_MEM_PHONE_IN_QA FOREIGN KEY(MEM_PHONE) REFERENCES MEMBER(MEM_PHONE)
);

--購物訂單
CREATE SEQUENCE SEQ_ORDER_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE ORDER_MASTER (
  ORDER_ID NUMBER PRIMARY KEY NOT NULL,
  ORDER_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  MEM_PHONE VARCHAR2(10) NOT NULL,
  RECIPIENT_NAME VARCHAR2(30) NOT NULL,
  RECIPIENT_MOB_NUMBER VARCHAR2(30) NOT NULL,
  RECIPIENT_TEL_NUMBER VARCHAR2(30),
  RECIPIENT_EMAIL VARCHAR2(100) NOT NULL,
  BUSINESS_NUMBER VARCHAR2(30),
  DELIVERY_METHOD NUMBER NOT NULL,
  DELIVERY_ADDRESS VARCHAR2(90) NOT NULL,
  ORDER_MEMO VARCHAR2(90),
  INVOICE_PRICE VARCHAR2(30),
  INVOICE_PAID_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  DELIVERY_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
  ORDER_STATUS NUMBER NOT NULL,
  CONSTRAINT FK_MEM_PHONE_IN_OM FOREIGN KEY(MEM_PHONE) REFERENCES MEMBER(MEM_PHONE)
);

--訂單明細
CREATE TABLE ORDER_DETAIL (
  ORDER_ID NUMBER NOT NULL,
  PRODUCT_ID VARCHAR2(30) NOT NULL,
  PRODUCT_PRICE NUMBER NOT NULL,
  QUANTITY NUMBER NOT NULL,
  PRODUCT_REVIEW VARCHAR2(300),
  PRODUCT_REVIEW_PHOTO BLOB,
  PRODUCT_REVIEW_TS TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  PRODUCT_REVIEW_STATUS NUMBER NOT NULL,
  CONSTRAINT PK_ORDER_DETAIL PRIMARY KEY(ORDER_ID, PRODUCT_ID),
  CONSTRAINT FK_ORDER_ID_IN_DETAIL FOREIGN KEY(ORDER_ID) REFERENCES ORDER_MASTER(ORDER_ID),
  CONSTRAINT FK_PRODUCT_ID_IN_DETAIL FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID)
);

--最新消息表
CREATE SEQUENCE SEQ_NEWS_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE LATEST_NEWS (
  NEWS_ID NUMBER PRIMARY KEY NOT NULL,
  NEWS_TITLE VARCHAR2(90),
  NEWS_CONTENT_TXT VARCHAR2(1000),
  NEWS_CONTENT_IMG BLOB,
  NEWS_STATUS NUMBER NOT NULL,
  NEWS_TS TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

--商城廣告表
CREATE SEQUENCE SEQ_AD_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;

CREATE TABLE ADVERTISEMENT (
  AD_ID NUMBER PRIMARY KEY NOT NULL,
  PRODUCT_ID VARCHAR2(30) NOT NULL,
  AD_TITLE VARCHAR2(90),
  AD_CONTENT_TXT VARCHAR2(1000),
  AD_CONTENT_IMG BLOB,
  AD_START_DATE DATE NOT NULL,
  AD_END_DATE DATE NOT NULL,
  AD_STATUS NUMBER NOT NULL,
  AD_TS TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  CONSTRAINT FK_PRODUCT_ID_IN_AD FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID)
);

--促銷活動
CREATE SEQUENCE SEQ_PROMO_ID
  START WITH 1
  INCREMENT BY 1
  MINVALUE 1
  NOMAXVALUE;
  
CREATE TABLE PROMOTION (
  PROMO_ID NUMBER PRIMARY KEY NOT NULL,
  PROMO_NAME VARCHAR2(90),
  PROMO_IMG BLOB,
  PROMO_START_DATE DATE NOT NULL,
  PROMO_END_DATE DATE NOT NULL,
  PROMO_STATUS NUMBER NOT NULL
);

--促銷活動明細
CREATE TABLE PROMOTION_DETAIL (
  PROMO_ID NUMBER NOT NULL,
  PRODUCT_ID VARCHAR2(30) NOT NULL,
  PRODUCT_PRICE NUMBER NOT NULL,
  PRODUCT_PROMO_QTY NUMBER,
  CONSTRAINT PK_PROMOTION_IN_PROMO PRIMARY KEY(PROMO_ID, PRODUCT_ID),
  CONSTRAINT FK_PROMO_ID_IN_PROMO FOREIGN KEY(PROMO_ID) REFERENCES PROMOTION(PROMO_ID),
  CONSTRAINT FK_PRODUCT_ID_IN_PROMO FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID)
);


  